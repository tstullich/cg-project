<!DOCTYPE html>
<html class="no-js">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Patchmatch Applied To PBR</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link href="index_files/css.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="index_files/style.css">
    <script src="index_files/MathJax.js" id=""></script>
    <style type="text/css">
        .MathJax_Hover_Frame {
            border-radius: .25em;
            -webkit-border-radius: .25em;
            -moz-border-radius: .25em;
            -khtml-border-radius: .25em;
            box-shadow: 0px 0px 15px #83A;
            -webkit-box-shadow: 0px 0px 15px #83A;
            -moz-box-shadow: 0px 0px 15px #83A;
            -khtml-box-shadow: 0px 0px 15px #83A;
            border: 1px solid #A6D ! important;
            display: inline-block;
            position: absolute
        }

        .MathJax_Menu_Button .MathJax_Hover_Arrow {
            position: absolute;
            cursor: pointer;
            display: inline-block;
            border: 2px solid #AAA;
            border-radius: 4px;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            -khtml-border-radius: 4px;
            font-family: 'Courier New', Courier;
            font-size: 9px;
            color: #F0F0F0
        }

        .MathJax_Menu_Button .MathJax_Hover_Arrow span {
            display: block;
            background-color: #AAA;
            border: 1px solid;
            border-radius: 3px;
            line-height: 0;
            padding: 4px
        }

        .MathJax_Hover_Arrow:hover {
            color: white !important;
            border: 2px solid #CCC !important
        }

        .MathJax_Hover_Arrow:hover span {
            background-color: #CCC !important
        }
    </style>
    <style type="text/css">
        #MathJax_About {
            position: fixed;
            left: 50%;
            width: auto;
            text-align: center;
            border: 3px outset;
            padding: 1em 2em;
            background-color: #DDDDDD;
            color: black;
            cursor: default;
            font-family: message-box;
            font-size: 120%;
            font-style: normal;
            text-indent: 0;
            text-transform: none;
            line-height: normal;
            letter-spacing: normal;
            word-spacing: normal;
            word-wrap: normal;
            white-space: nowrap;
            float: none;
            z-index: 201;
            border-radius: 15px;
            -webkit-border-radius: 15px;
            -moz-border-radius: 15px;
            -khtml-border-radius: 15px;
            box-shadow: 0px 10px 20px #808080;
            -webkit-box-shadow: 0px 10px 20px #808080;
            -moz-box-shadow: 0px 10px 20px #808080;
            -khtml-box-shadow: 0px 10px 20px #808080;
            filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')
        }

        #MathJax_About.MathJax_MousePost {
            outline: none
        }

        .MathJax_Menu {
            position: absolute;
            background-color: white;
            color: black;
            width: auto;
            padding: 5px 0px;
            border: 1px solid #CCCCCC;
            margin: 0;
            cursor: default;
            font: menu;
            text-align: left;
            text-indent: 0;
            text-transform: none;
            line-height: normal;
            letter-spacing: normal;
            word-spacing: normal;
            word-wrap: normal;
            white-space: nowrap;
            float: none;
            z-index: 201;
            border-radius: 5px;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            -khtml-border-radius: 5px;
            box-shadow: 0px 10px 20px #808080;
            -webkit-box-shadow: 0px 10px 20px #808080;
            -moz-box-shadow: 0px 10px 20px #808080;
            -khtml-box-shadow: 0px 10px 20px #808080;
            filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')
        }

        .MathJax_MenuItem {
            padding: 1px 2em;
            background: transparent
        }

        .MathJax_MenuArrow {
            position: absolute;
            right: .5em;
            padding-top: .25em;
            color: #666666;
            font-size: .75em
        }

        .MathJax_MenuActive .MathJax_MenuArrow {
            color: white
        }

        .MathJax_MenuArrow.RTL {
            left: .5em;
            right: auto
        }

        .MathJax_MenuCheck {
            position: absolute;
            left: .7em
        }

        .MathJax_MenuCheck.RTL {
            right: .7em;
            left: auto
        }

        .MathJax_MenuRadioCheck {
            position: absolute;
            left: .7em
        }

        .MathJax_MenuRadioCheck.RTL {
            right: .7em;
            left: auto
        }

        .MathJax_MenuLabel {
            padding: 1px 2em 3px 1.33em;
            font-style: italic
        }

        .MathJax_MenuRule {
            border-top: 1px solid #DDDDDD;
            margin: 4px 3px
        }

        .MathJax_MenuDisabled {
            color: GrayText
        }

        .MathJax_MenuActive {
            background-color: #606872;
            color: white
        }

        .MathJax_MenuDisabled:focus,
        .MathJax_MenuLabel:focus {
            background-color: #E8E8E8
        }

        .MathJax_ContextMenu:focus {
            outline: none
        }

        .MathJax_ContextMenu .MathJax_MenuItem:focus {
            outline: none
        }

        #MathJax_AboutClose {
            top: .2em;
            right: .2em
        }

        .MathJax_Menu .MathJax_MenuClose {
            top: -10px;
            left: -10px
        }

        .MathJax_MenuClose {
            position: absolute;
            cursor: pointer;
            display: inline-block;
            border: 2px solid #AAA;
            border-radius: 18px;
            -webkit-border-radius: 18px;
            -moz-border-radius: 18px;
            -khtml-border-radius: 18px;
            font-family: 'Courier New', Courier;
            font-size: 24px;
            color: #F0F0F0
        }

        .MathJax_MenuClose span {
            display: block;
            background-color: #AAA;
            border: 1.5px solid;
            border-radius: 18px;
            -webkit-border-radius: 18px;
            -moz-border-radius: 18px;
            -khtml-border-radius: 18px;
            line-height: 0;
            padding: 8px 0 6px
        }

        .MathJax_MenuClose:hover {
            color: white !important;
            border: 2px solid #CCC !important
        }

        .MathJax_MenuClose:hover span {
            background-color: #CCC !important
        }

        .MathJax_MenuClose:hover:focus {
            outline: none
        }
    </style>
    <style type="text/css">
        .MathJax_Preview .MJXf-math {
            color: inherit !important
        }
    </style>
    <style type="text/css">
        .MJX_Assistive_MathML {
            position: absolute !important;
            top: 0;
            left: 0;
            clip: rect(1px, 1px, 1px, 1px);
            padding: 1px 0 0 0 !important;
            border: 0 !important;
            height: 1px !important;
            width: 1px !important;
            overflow: hidden !important;
            display: block !important;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        .MJX_Assistive_MathML.MJX_Assistive_MathML_Block {
            width: 100% !important
        }
    </style>
    <style type="text/css">
        #MathJax_Zoom {
            position: absolute;
            background-color: #F0F0F0;
            overflow: auto;
            display: block;
            z-index: 301;
            padding: .5em;
            border: 1px solid black;
            margin: 0;
            font-weight: normal;
            font-style: normal;
            text-align: left;
            text-indent: 0;
            text-transform: none;
            line-height: normal;
            letter-spacing: normal;
            word-spacing: normal;
            word-wrap: normal;
            white-space: nowrap;
            float: none;
            -webkit-box-sizing: content-box;
            -moz-box-sizing: content-box;
            box-sizing: content-box;
            box-shadow: 5px 5px 15px #AAAAAA;
            -webkit-box-shadow: 5px 5px 15px #AAAAAA;
            -moz-box-shadow: 5px 5px 15px #AAAAAA;
            -khtml-box-shadow: 5px 5px 15px #AAAAAA;
            filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')
        }

        #MathJax_ZoomOverlay {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 300;
            display: inline-block;
            width: 100%;
            height: 100%;
            border: 0;
            padding: 0;
            margin: 0;
            background-color: white;
            opacity: 0;
            filter: alpha(opacity=0)
        }

        #MathJax_ZoomFrame {
            position: relative;
            display: inline-block;
            height: 0;
            width: 0
        }

        #MathJax_ZoomEventTrap {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 302;
            display: inline-block;
            border: 0;
            padding: 0;
            margin: 0;
            background-color: white;
            opacity: 0;
            filter: alpha(opacity=0)
        }
    </style>
    <style type="text/css">
        .MathJax_Preview {
            color: #888
        }

        #MathJax_Message {
            position: fixed;
            left: 1px;
            bottom: 2px;
            background-color: #E6E6E6;
            border: 1px solid #959595;
            margin: 0px;
            padding: 2px 8px;
            z-index: 102;
            color: black;
            font-size: 80%;
            width: auto;
            white-space: nowrap
        }

        #MathJax_MSIE_Frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 0px;
            z-index: 101;
            border: 0px;
            margin: 0px;
            padding: 0px
        }

        .MathJax_Error {
            color: #CC0000;
            font-style: italic
        }
    </style>
    <style type="text/css">
        .MJXp-script {
            font-size: .8em
        }

        .MJXp-right {
            -webkit-transform-origin: right;
            -moz-transform-origin: right;
            -ms-transform-origin: right;
            -o-transform-origin: right;
            transform-origin: right
        }

        .MJXp-bold {
            font-weight: bold
        }

        .MJXp-italic {
            font-style: italic
        }

        .MJXp-scr {
            font-family: MathJax_Script, 'Times New Roman', Times, STIXGeneral, serif
        }

        .MJXp-frak {
            font-family: MathJax_Fraktur, 'Times New Roman', Times, STIXGeneral, serif
        }

        .MJXp-sf {
            font-family: MathJax_SansSerif, 'Times New Roman', Times, STIXGeneral, serif
        }

        .MJXp-cal {
            font-family: MathJax_Caligraphic, 'Times New Roman', Times, STIXGeneral, serif
        }

        .MJXp-mono {
            font-family: MathJax_Typewriter, 'Times New Roman', Times, STIXGeneral, serif
        }

        .MJXp-largeop {
            font-size: 150%
        }

        .MJXp-largeop.MJXp-int {
            vertical-align: -.2em
        }

        .MJXp-math {
            display: inline-block;
            line-height: 1.2;
            text-indent: 0;
            font-family: 'Times New Roman', Times, STIXGeneral, serif;
            white-space: nowrap;
            border-collapse: collapse
        }

        .MJXp-display {
            display: block;
            text-align: center;
            margin: 1em 0
        }

        .MJXp-math span {
            display: inline-block
        }

        .MJXp-box {
            display: block !important;
            text-align: center
        }

        .MJXp-box:after {
            content: " "
        }

        .MJXp-rule {
            display: block !important;
            margin-top: .1em
        }

        .MJXp-char {
            display: block !important
        }

        .MJXp-mo {
            margin: 0 .15em
        }

        .MJXp-mfrac {
            margin: 0 .125em;
            vertical-align: .25em
        }

        .MJXp-denom {
            display: inline-table !important;
            width: 100%
        }

        .MJXp-denom>* {
            display: table-row !important
        }

        .MJXp-surd {
            vertical-align: top
        }

        .MJXp-surd>* {
            display: block !important
        }

        .MJXp-script-box>* {
            display: table !important;
            height: 50%
        }

        .MJXp-script-box>*>* {
            display: table-cell !important;
            vertical-align: top
        }

        .MJXp-script-box>*:last-child>* {
            vertical-align: bottom
        }

        .MJXp-script-box>*>*>* {
            display: block !important
        }

        .MJXp-mphantom {
            visibility: hidden
        }

        .MJXp-munderover {
            display: inline-table !important
        }

        .MJXp-over {
            display: inline-block !important;
            text-align: center
        }

        .MJXp-over>* {
            display: block !important
        }

        .MJXp-munderover>* {
            display: table-row !important
        }

        .MJXp-mtable {
            vertical-align: .25em;
            margin: 0 .125em
        }

        .MJXp-mtable>* {
            display: inline-table !important;
            vertical-align: middle
        }

        .MJXp-mtr {
            display: table-row !important
        }

        .MJXp-mtd {
            display: table-cell !important;
            text-align: center;
            padding: .5em 0 0 .5em
        }

        .MJXp-mtr>.MJXp-mtd:first-child {
            padding-left: 0
        }

        .MJXp-mtr:first-child>.MJXp-mtd {
            padding-top: 0
        }

        .MJXp-mlabeledtr {
            display: table-row !important
        }

        .MJXp-mlabeledtr>.MJXp-mtd:first-child {
            padding-left: 0
        }

        .MJXp-mlabeledtr:first-child>.MJXp-mtd {
            padding-top: 0
        }

        .MJXp-merror {
            background-color: #FFFF88;
            color: #CC0000;
            border: 1px solid #CC0000;
            padding: 1px 3px;
            font-style: normal;
            font-size: 90%
        }

        .MJXp-scale0 {
            -webkit-transform: scaleX(.0);
            -moz-transform: scaleX(.0);
            -ms-transform: scaleX(.0);
            -o-transform: scaleX(.0);
            transform: scaleX(.0)
        }

        .MJXp-scale1 {
            -webkit-transform: scaleX(.1);
            -moz-transform: scaleX(.1);
            -ms-transform: scaleX(.1);
            -o-transform: scaleX(.1);
            transform: scaleX(.1)
        }

        .MJXp-scale2 {
            -webkit-transform: scaleX(.2);
            -moz-transform: scaleX(.2);
            -ms-transform: scaleX(.2);
            -o-transform: scaleX(.2);
            transform: scaleX(.2)
        }

        .MJXp-scale3 {
            -webkit-transform: scaleX(.3);
            -moz-transform: scaleX(.3);
            -ms-transform: scaleX(.3);
            -o-transform: scaleX(.3);
            transform: scaleX(.3)
        }

        .MJXp-scale4 {
            -webkit-transform: scaleX(.4);
            -moz-transform: scaleX(.4);
            -ms-transform: scaleX(.4);
            -o-transform: scaleX(.4);
            transform: scaleX(.4)
        }

        .MJXp-scale5 {
            -webkit-transform: scaleX(.5);
            -moz-transform: scaleX(.5);
            -ms-transform: scaleX(.5);
            -o-transform: scaleX(.5);
            transform: scaleX(.5)
        }

        .MJXp-scale6 {
            -webkit-transform: scaleX(.6);
            -moz-transform: scaleX(.6);
            -ms-transform: scaleX(.6);
            -o-transform: scaleX(.6);
            transform: scaleX(.6)
        }

        .MJXp-scale7 {
            -webkit-transform: scaleX(.7);
            -moz-transform: scaleX(.7);
            -ms-transform: scaleX(.7);
            -o-transform: scaleX(.7);
            transform: scaleX(.7)
        }

        .MJXp-scale8 {
            -webkit-transform: scaleX(.8);
            -moz-transform: scaleX(.8);
            -ms-transform: scaleX(.8);
            -o-transform: scaleX(.8);
            transform: scaleX(.8)
        }

        .MJXp-scale9 {
            -webkit-transform: scaleX(.9);
            -moz-transform: scaleX(.9);
            -ms-transform: scaleX(.9);
            -o-transform: scaleX(.9);
            transform: scaleX(.9)
        }

        .MathJax_PHTML .noError {
            vertical-align: ;
            font-size: 90%;
            text-align: left;
            color: black;
            padding: 1px 3px;
            border: 1px solid
        }
    </style>
    <style type="text/css">
        .mjx-chtml {
            display: inline-block;
            line-height: 0;
            text-indent: 0;
            text-align: left;
            text-transform: none;
            font-style: normal;
            font-weight: normal;
            font-size: 100%;
            font-size-adjust: none;
            letter-spacing: normal;
            word-wrap: normal;
            word-spacing: normal;
            white-space: nowrap;
            float: none;
            direction: ltr;
            max-width: none;
            max-height: none;
            min-width: 0;
            min-height: 0;
            border: 0;
            margin: 0;
            padding: 1px 0
        }

        .MJXc-display {
            display: block;
            text-align: center;
            margin: 1em 0;
            padding: 0
        }

        .mjx-chtml[tabindex]:focus,
        body :focus .mjx-chtml[tabindex] {
            display: inline-table
        }

        .mjx-full-width {
            text-align: center;
            display: table-cell !important;
            width: 10000em
        }

        .mjx-math {
            display: inline-block;
            border-collapse: separate;
            border-spacing: 0
        }

        .mjx-math * {
            display: inline-block;
            -webkit-box-sizing: content-box !important;
            -moz-box-sizing: content-box !important;
            box-sizing: content-box !important;
            text-align: left
        }

        .mjx-numerator {
            display: block;
            text-align: center
        }

        .mjx-denominator {
            display: block;
            text-align: center
        }

        .MJXc-stacked {
            height: 0;
            position: relative
        }

        .MJXc-stacked>* {
            position: absolute
        }

        .MJXc-bevelled>* {
            display: inline-block
        }

        .mjx-stack {
            display: inline-block
        }

        .mjx-op {
            display: block
        }

        .mjx-under {
            display: table-cell
        }

        .mjx-over {
            display: block
        }

        .mjx-over>* {
            padding-left: 0px !important;
            padding-right: 0px !important
        }

        .mjx-under>* {
            padding-left: 0px !important;
            padding-right: 0px !important
        }

        .mjx-stack>.mjx-sup {
            display: block
        }

        .mjx-stack>.mjx-sub {
            display: block
        }

        .mjx-prestack>.mjx-presup {
            display: block
        }

        .mjx-prestack>.mjx-presub {
            display: block
        }

        .mjx-delim-h>.mjx-char {
            display: inline-block
        }

        .mjx-surd {
            vertical-align: top
        }

        .mjx-mphantom * {
            visibility: hidden
        }

        .mjx-merror {
            background-color: #FFFF88;
            color: #CC0000;
            border: 1px solid #CC0000;
            padding: 2px 3px;
            font-style: normal;
            font-size: 90%
        }

        .mjx-annotation-xml {
            line-height: normal
        }

        .mjx-menclose>svg {
            fill: none;
            stroke: currentColor
        }

        .mjx-mtr {
            display: table-row
        }

        .mjx-mlabeledtr {
            display: table-row
        }

        .mjx-mtd {
            display: table-cell;
            text-align: center
        }

        .mjx-label {
            display: table-row
        }

        .mjx-box {
            display: inline-block
        }

        .mjx-block {
            display: block
        }

        .mjx-span {
            display: inline
        }

        .mjx-char {
            display: block;
            white-space: pre
        }

        .mjx-itable {
            display: inline-table;
            width: auto
        }

        .mjx-row {
            display: table-row
        }

        .mjx-cell {
            display: table-cell
        }

        .mjx-table {
            display: table;
            width: 100%
        }

        .mjx-line {
            display: block;
            height: 0
        }

        .mjx-strut {
            width: 0;
            padding-top: 1em
        }

        .mjx-vsize {
            width: 0
        }

        .MJXc-space1 {
            margin-left: .167em
        }

        .MJXc-space2 {
            margin-left: .222em
        }

        .MJXc-space3 {
            margin-left: .278em
        }

        .mjx-chartest {
            display: block;
            visibility: hidden;
            position: absolute;
            top: 0;
            line-height: normal;
            font-size: 500%
        }

        .mjx-chartest .mjx-char {
            display: inline
        }

        .mjx-chartest .mjx-box {
            padding-top: 1000px
        }

        .MJXc-processing {
            visibility: hidden;
            position: fixed;
            width: 0;
            height: 0;
            overflow: hidden
        }

        .MJXc-processed {
            display: none
        }

        .mjx-test {
            display: block;
            font-style: normal;
            font-weight: normal;
            font-size: 100%;
            font-size-adjust: none;
            text-indent: 0;
            text-transform: none;
            letter-spacing: normal;
            word-spacing: normal;
            overflow: hidden;
            height: 1px
        }

        .mjx-ex-box-test {
            position: absolute;
            width: 1px;
            height: 60ex
        }

        .mjx-line-box-test {
            display: table !important
        }

        .mjx-line-box-test span {
            display: table-cell !important;
            width: 10000em !important;
            min-width: 0;
            max-width: none;
            padding: 0;
            border: 0;
            margin: 0
        }

        #MathJax_CHTML_Tooltip {
            background-color: InfoBackground;
            color: InfoText;
            border: 1px solid black;
            box-shadow: 2px 2px 5px #AAAAAA;
            -webkit-box-shadow: 2px 2px 5px #AAAAAA;
            -moz-box-shadow: 2px 2px 5px #AAAAAA;
            -khtml-box-shadow: 2px 2px 5px #AAAAAA;
            padding: 3px 4px;
            z-index: 401;
            position: absolute;
            left: 0;
            top: 0;
            width: auto;
            height: auto;
            display: none
        }

        .mjx-chtml .mjx-noError {
            line-height: 1.2;
            vertical-align: ;
            font-size: 90%;
            text-align: left;
            color: black;
            padding: 1px 3px;
            border: 1px solid
        }

        .MJXc-TeX-unknown-R {
            font-family: STIXGeneral, 'Cambria Math', 'Arial Unicode MS', serif;
            font-style: normal;
            font-weight: normal
        }

        .MJXc-TeX-unknown-I {
            font-family: STIXGeneral, 'Cambria Math', 'Arial Unicode MS', serif;
            font-style: italic;
            font-weight: normal
        }

        .MJXc-TeX-unknown-B {
            font-family: STIXGeneral, 'Cambria Math', 'Arial Unicode MS', serif;
            font-style: normal;
            font-weight: bold
        }

        .MJXc-TeX-unknown-BI {
            font-family: STIXGeneral, 'Cambria Math', 'Arial Unicode MS', serif;
            font-style: italic;
            font-weight: bold
        }

        .MJXc-TeX-ams-R {
            font-family: MJXc-TeX-ams-R, MJXc-TeX-ams-Rw
        }

        .MJXc-TeX-cal-B {
            font-family: MJXc-TeX-cal-B, MJXc-TeX-cal-Bx, MJXc-TeX-cal-Bw
        }

        .MJXc-TeX-frak-R {
            font-family: MJXc-TeX-frak-R, MJXc-TeX-frak-Rw
        }

        .MJXc-TeX-frak-B {
            font-family: MJXc-TeX-frak-B, MJXc-TeX-frak-Bx, MJXc-TeX-frak-Bw
        }

        .MJXc-TeX-math-BI {
            font-family: MJXc-TeX-math-BI, MJXc-TeX-math-BIx, MJXc-TeX-math-BIw
        }

        .MJXc-TeX-sans-R {
            font-family: MJXc-TeX-sans-R, MJXc-TeX-sans-Rw
        }

        .MJXc-TeX-sans-B {
            font-family: MJXc-TeX-sans-B, MJXc-TeX-sans-Bx, MJXc-TeX-sans-Bw
        }

        .MJXc-TeX-sans-I {
            font-family: MJXc-TeX-sans-I, MJXc-TeX-sans-Ix, MJXc-TeX-sans-Iw
        }

        .MJXc-TeX-script-R {
            font-family: MJXc-TeX-script-R, MJXc-TeX-script-Rw
        }

        .MJXc-TeX-type-R {
            font-family: MJXc-TeX-type-R, MJXc-TeX-type-Rw
        }

        .MJXc-TeX-cal-R {
            font-family: MJXc-TeX-cal-R, MJXc-TeX-cal-Rw
        }

        .MJXc-TeX-main-B {
            font-family: MJXc-TeX-main-B, MJXc-TeX-main-Bx, MJXc-TeX-main-Bw
        }

        .MJXc-TeX-main-I {
            font-family: MJXc-TeX-main-I, MJXc-TeX-main-Ix, MJXc-TeX-main-Iw
        }

        .MJXc-TeX-main-R {
            font-family: MJXc-TeX-main-R, MJXc-TeX-main-Rw
        }

        .MJXc-TeX-math-I {
            font-family: MJXc-TeX-math-I, MJXc-TeX-math-Ix, MJXc-TeX-math-Iw
        }

        .MJXc-TeX-size1-R {
            font-family: MJXc-TeX-size1-R, MJXc-TeX-size1-Rw
        }

        .MJXc-TeX-size2-R {
            font-family: MJXc-TeX-size2-R, MJXc-TeX-size2-Rw
        }

        .MJXc-TeX-size3-R {
            font-family: MJXc-TeX-size3-R, MJXc-TeX-size3-Rw
        }

        .MJXc-TeX-size4-R {
            font-family: MJXc-TeX-size4-R, MJXc-TeX-size4-Rw
        }

        @font-face {
            font-family: MJXc-TeX-ams-R;
            src: local('MathJax_AMS'), local('MathJax_AMS-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-ams-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-cal-B;
            src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')
        }

        @font-face {
            font-family: MJXc-TeX-cal-Bx;
            src: local('MathJax_Caligraphic');
            font-weight: bold
        }

        @font-face {
            font-family: MJXc-TeX-cal-Bw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-frak-R;
            src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-frak-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-frak-B;
            src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')
        }

        @font-face {
            font-family: MJXc-TeX-frak-Bx;
            src: local('MathJax_Fraktur');
            font-weight: bold
        }

        @font-face {
            font-family: MJXc-TeX-frak-Bw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-math-BI;
            src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')
        }

        @font-face {
            font-family: MJXc-TeX-math-BIx;
            src: local('MathJax_Math');
            font-weight: bold;
            font-style: italic
        }

        @font-face {
            font-family: MJXc-TeX-math-BIw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-sans-R;
            src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-sans-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-sans-B;
            src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')
        }

        @font-face {
            font-family: MJXc-TeX-sans-Bx;
            src: local('MathJax_SansSerif');
            font-weight: bold
        }

        @font-face {
            font-family: MJXc-TeX-sans-Bw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-sans-I;
            src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')
        }

        @font-face {
            font-family: MJXc-TeX-sans-Ix;
            src: local('MathJax_SansSerif');
            font-style: italic
        }

        @font-face {
            font-family: MJXc-TeX-sans-Iw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-script-R;
            src: local('MathJax_Script'), local('MathJax_Script-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-script-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-type-R;
            src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-type-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-cal-R;
            src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-cal-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-main-B;
            src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')
        }

        @font-face {
            font-family: MJXc-TeX-main-Bx;
            src: local('MathJax_Main');
            font-weight: bold
        }

        @font-face {
            font-family: MJXc-TeX-main-Bw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-main-I;
            src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')
        }

        @font-face {
            font-family: MJXc-TeX-main-Ix;
            src: local('MathJax_Main');
            font-style: italic
        }

        @font-face {
            font-family: MJXc-TeX-main-Iw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-main-R;
            src: local('MathJax_Main'), local('MathJax_Main-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-main-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-math-I;
            src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')
        }

        @font-face {
            font-family: MJXc-TeX-math-Ix;
            src: local('MathJax_Math');
            font-style: italic
        }

        @font-face {
            font-family: MJXc-TeX-math-Iw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-size1-R;
            src: local('MathJax_Size1'), local('MathJax_Size1-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-size1-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-size2-R;
            src: local('MathJax_Size2'), local('MathJax_Size2-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-size2-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-size3-R;
            src: local('MathJax_Size3'), local('MathJax_Size3-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-size3-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')
        }

        @font-face {
            font-family: MJXc-TeX-size4-R;
            src: local('MathJax_Size4'), local('MathJax_Size4-Regular')
        }

        @font-face {
            font-family: MJXc-TeX-size4-Rw;
            src
            /*1*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot');
            src
            /*2*/
            : url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')
        }
    </style>
</head>

<body>
    <div id="MathJax_Message" style="display: none;"></div>
    <div class="container">

        <nav class="navbar">
            <div class="container">
                <ul class="navbar-list">
                    <li class="navbar-item">
                        <a class="navbar-link" href="#intro">Intro</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#background">Background</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#setup">Setup</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#results">Results</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#conclusion">Conclusion</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#futurework">Future Work</a>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#references">References</a>
                    </li>
                </ul>
            </div>
        </nav>

        <section class="header" id="intro">
            <h2 class="title">Patchmatch Applied to Physically Based Rendering</h2>
            <h6>Project by Tim Stullich (<a href="mailto:stullich@campus.tu-berlin.de">stullich@campus.tu-berlin.de</a>)
            </h6>

            <div class="row">
                <p>This project explored the use of the PatchMatch algorithm, which is typically used in image editing
                    software, to try and speed up the processing time of rendering complex scenes with a pathtracer.
                    Physically based rendering techniques, path tracing being one of them, are often quite
                    resource-intensive
                    and require a lot of time to converge to a desired output, therefore finding useful
                    optimizations in this space are highly sought after.
                </p>
            </div>
        </section>

        <div class="docs-section" id="background">
            <h3 class="section-heading">Background</h3>
            <p class="section-description">Physically based rendering (PBR) techniques have been around for quite some
                and have seen heavy use in the VFX industry and other domains where photorealistic imagery is required.
                Although the underlying principles of PBR are quite intuitive and mostly simplistic, actual
                implementations
                of these algorithms often require a large amount of computing resources (CPU, RAM, etc.) in order to
                produce an output that looks photorealistic. One factor that contributes to this problem is that many
                samples per pixel need
                to be taken and many light transport calculations need to be done for the image to converge.
            </p>

            <h5>Path Tracing</h5>
            <p>
                Path tracing is one of many different algorithms which can be used to render a three-dimensional
                scene.
                It is based on integrating over all of the illuminance which arrives at a single point of a surface.
                This is done by casting rays from the position of a single pixel into a scene and determining if the
                ray makes any intersections with the surface of an object contained within the scene.
                Once an intersection between a light ray and an object has been detected, the algorithm then
                calculates a reflectance ray through the use of a Bidirectional Reflectance Distribution Function
                (BRDF) to
                determine further light contributions from other light sources within the scene at the intersection
                point.
                To simulate the randomized nature of a light ray, a path tracer uses Monte Carlo randomization
                within a BRDF to determine how the light is reflected off of a surface.
                Although this is an effective method for simulating real-world interactions between light and
                physical objects, the randomized nature of the algorithm leads to problems when not enough samples
                are taken for a given pixel, leading to noisy or grainy output. The natural solution that follows is
                to increase the number of samples taken in order to reduce the noise.
            </p>

            <h5>The Sampling Problem</h5>
            <p>
                <div class="u-pull-right" style="text-align: center; width: 40%; height: 20%; padding-left: 0.5cm">
                    <img id="fig1" src="index_files/spp-compare.gif" />
                    <p>Renders of the same scene taken at different SPP&nbsp;<a href="#2">[2]</a></p>
                </div>
                As mentioned before, PBR algorithms require many samples per pixel (SPP) to reduce noise that is due
                to
                random sampling. Empirically we have observed that the rendering time is roughly linearly-bound to
                the amount of samples per pixel (SPP) a rendering uses for its final output. This is also a problem
                that
                has also been observed in production within real-world applications. A common solution to this problem
                is to
                reduce the numer of samples taken per pixel (<= 32 SPP) and then denoise the image through the use of
                    reconstruction filters or machine-learning algorithms. Even though reconstruction filters are easy
                    to implement, they often leave unwanted artifacts in an image, mostly in the form of blur along
                    edges and machine learning algorithms require good datasets in to perform well on noisy images. <p>
                    Therefore, a perfect solution to denoise images has not been found, but lots of research has been
                    going into finding a solution to this problem. In the following section we will introduce an
                    observation
                    that has been made when rendering a series of images, for example when animating a scene in a movie,
                    where optimizations could still be made to decrease rendering times.
            </p>
            <h5>An Exploitable Observation</h5>
            <p>
                <div class="u-pull-right" style="text-align: center; width: 40%; height: 20%; padding-left: 0.5cm">
                    <img id="fig2" class="u-max-full-width" src="index_files/chess.png" />
                    <p>A scene from the Pixar short film <i>Gerry's Game</i></p>
                </div>
                A renderer by nature has to produce a large amount of data through sampling, but oftentimes the
                data that is
                sampled is static in nature. If we take a look at the image from a scene in the Pixar movie <i>Gerry's
                    Game</i>
                we can see for example that the data that exists in the background does not change much, even if the
                camera were to pan around
                the scene.
                This
                invariance
                of color values, if detected, could be used in order to reduce rendering times by taking color values
                from prior
                rendering passes and swapped in place to produce a final output. As a consequence, less sampling
                would need to
                be done overall if a sequence of images needed to be rendered, since a reuse of pixel values could
                essentially eliminate the need for rendering paths from corresponding patches.
            </p>

            <h5>PatchMatch</h5>
            <p>
                <div class="u-pull-left" style="text-align: center; width: 40%; height: 20%; padding-right: 0.5cm">
                    <img id="fig1" class="u-max-full-width" src="index_files/propagation.png" />
                    <p>Random propagation through PatchMatch</p>
                </div>
                PatchMatch is a an algorithm that quickly finds correspondences within square regions (patches)
                of an image.
                Typically used in image editing software for object removal and moving content within
                an
                image, PatchMatch has found other applications outside of the image editing domain. PatchMatch
                accomplishes fast searches by creating a so-called <i>Nearest Neighbor Field</i> which is a
                mapping of all possible pixel offsets from an image A into the neighboring image B.
                The distance or offset of a patch is calculated by a distance function and is then stored in the
                NNF.
                The function that is used in the standard implementation of PatchMatch to measure distance is
                <math>
                    <mrow>
                        <mi>f</mi>
                        <mfenced>
                            <mi>a</mi>
                        </mfenced>
                        <mo>=</mo>
                        <mrow>
                            <mi>b</mi>
                            <mo>-</mo>
                            <mi>a</mi>
                        </mrow>
                    </mrow>
                </math>
                where <i>a</i> is the patch coordinate in image A and <i>b</i> is the coordinate of the nearest
                neighbor in image B.
            </p>
            <p>
                The authors of PatchMatch state in their work that it is possible to swap out the given distance
                function for more robust variants. This fact gives us an opportunity to explore if we can apply
                PatchMatch to our work. The following sections are going to describe the process which was used
                in order to evaluate the new distance functions that could be used in order to alleviate the
                problem that is introduced by redundant sampling.
            </p>
        </div>

        <div class="docs-section" id="setup">
            <h3 class="section-heading">Setup</h3>
            <p>In order to test if PatchMatch is suitable for improving rendering performance we need to
                have the
                following things:
                <ol>
                    <li>Data to run Patchmatch over</li>
                    <li>Distance functions which can be applied to our sampled data</li>
                </ol>
                <p>
                    What follows next is a description as to how we obtained data for our experiments and
                    introduce the distance functions that we tried to test.
                </p>
                <h5>The Mitsuba Renderer</h5>
                <p>The Mitsuba Renderer <a href="#3">[3]</a> is a research-oriented renderer which takes a
                    lot of
                    inspiration from <i>Phyisally Based Rendering</i> <a href="#4">[4]</a> a book by Matt
                    Phat et. al.
                    Due
                    to its ease-of-use
                    and it being open source, this renderer was used in order to produce the data that was
                    used to
                    evaluate PatchMatch. As a simple baseline, the Cornell Box example from Mitsuba's
                    website served as
                    the
                    baseline to produce various
                    data dumps taken at 16, 32, and 1024 SPP. The code of the renderer had to be modified to
                    able
                    to produce these data dumps. Each dump consisted of the RGBA color values as well as the
                    x and y
                    coordinates of a taken sample encoded in binary format. Reference images at the same SPP
                    were also
                    produced so that PatchMatch could work properly.
                </p>

                <h5>Distance Functions</h5>
                <p>We need to find a suitable distance function to compare the color values in our
                    reconstructed image
                    against
                    the randomly sampled data that is produced from our renderer. One way to do this is to
                    treat the
                    data
                    in the render dump as a random distribution in which we want to find a small subset and
                    try to match
                    it
                    against the pixel colors in a given neighborhood defined by PatchMatch. Two of these
                    possible
                    functions
                    are going to be described below.
                </p>
                <h6>Angular Distance</h6>
                <p>The angular distance between two histograms is defined as follows:</p>
                <div style="padding-bottom: 0.5cm">
                    <math>
                        <mrow>
                            <mi>dist</mi>
                            <mfenced>
                                <mi>A</mi>
                                <mi>B</mi>
                            </mfenced>
                            <mo>=</mo>
                            <mrow>
                                <mi>1</mi>
                                <mo>-</mo>
                                <mfrac>
                                    <mrow>
                                        <mi>1</mi>
                                    </mrow>
                                    <mrow>
                                        <mi>2</mi>
                                    </mrow>
                                </mfrac>
                                <mfenced>
                                    <mfenced open="<" close=">">
                                        <mfrac>
                                            <mrow>
                                                <mi>A</mi>
                                            </mrow>
                                            <mrow>
                                                <mi>||A||</mi>
                                            </mrow>
                                        </mfrac>
                                        <mfrac>
                                            <mrow>
                                                <mi>B</mi>
                                            </mrow>
                                            <mrow>
                                                <mi>||B||</mi>
                                            </mrow>
                                        </mfrac>
                                    </mfenced>
                                    <mrow>
                                        <mo>+</mo>
                                        <mi>1</mi>
                                    </mrow>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
                <p>
                    Where <i>A</i> and <i>B</i> are histograms consisting of the randomly sampled pixels
                    respectively.
                    The
                    output
                    of this function should give us a value between 0 and 1 which indicates how far apart
                    the color
                    distributions
                    of both histograms are. This is done by first taking the dot product of each of the
                    histograms and
                    then
                    normalizing it to bring the final value to a range between 0 and 1. While this might be
                    a simplistic
                    model of the relationship between two histograms, it might be sufficient enough for our
                    case.
                </p>

                <h6>Earth Mover's Distance</h6>
                <p>The Earth Mover's Distance, also called Wasserstein Metric, is often used in order to
                    compare similarities between randomly sampled distributions. Here the randomly sampled
                    distributions are the histograms. Since we have a special case here where our
                    distribution
                    consists of 1-dimensional buckets the Earth Mover's Distance can be defined as:
                </p>
                <div>
                    <math>
                        <mrow>
                            <msub>
                                <mi>EMD</mi>
                                <mi>0</mi>
                            </msub>
                            <mo>=</mo>
                            <mi>0</mi>
                        </mrow>
                    </math>
                </div>
                <div>
                    <math display='inline'>
                        <mrow>
                            <msub>
                                <mi>EMD</mi>
                                <mi>i+1</mi>
                            </msub>
                            <mo>=</mo>
                            <msub>
                                <mi>A</mi>
                                <mi>i</mi>
                            </msub>
                            <mo>+</mo>
                            <msub>
                                <mi>EMD</mi>
                                <mi>i</mi>
                            </msub>
                            <mo>-</mo>
                            <msub>
                                <mi>B</mi>
                                <mi>i</mi>
                            </msub>
                        </mrow>
                    </math>
                </div>
                <div style="padding-bottom: 0.5cm">
                    <math>
                        <mrow>
                            <mi>EMD</mi>
                            <mo>=</mo>
                            <munderover>
                                <mo>&sum;</mo>
                                <mrow>
                                    <mi>i</mi>
                                    <mo>=</mo>
                                    <mn>0</mn>
                                </mrow>
                                <mi>n</mi>
                            </munderover>
                            <mrow>
                                <mfenced open="||" close="||">
                                    <msub>
                                        <mi>EMD</mi>
                                        <mi>i</mi>
                                    </msub>
                                </mfenced>
                            </mrow>
                        </mrow>
                    </math>
                </div>
                <p>
                    Once again <i>A</i> and <i>B</i> are the histograms and each of the individual buckets
                    of the
                    histograms are consecutively processed according to the above definition. The output of
                    these
                    metrics are going to be floating point values, yet they do not always indi
                </p>

                <h5>Testing</h5>
                <h6>Prototyping</h6>
                <p>
                    The testing that was done can be split in two parts. First, a Jupyter notebook using
                    Python was
                    built in order to test the feasibility of using PatchMatch for PBR rendering. Scripts
                    were written
                    that would do the following things:
                    <ol>
                        <li>Read in the data from a Mitsuba rendering pass</li>
                        <li>Perform reconstruction filtering to create an output image</li>
                        <li>Run an interactive demo for testing the distance functions with the following
                            features:</li>
                        <ul>
                            <li>Being able to select a pixel in the reconstructed image</li>
                            <li>Displaying the selected color pixel and position in the corresponding data
                                dump</li>
                            <li>Verification of color values between the original image and the low
                                resolution dump</li>
                        </ul>
                    </ol>
                    The prototype showed that the distance functions had great promise and that both
                    distance functions
                    were able to effectively select pixels that closesly matched that of the reconstructed
                    image.
                    <div class="container">
                        <div class="row">
                            <div class="one-half-column">
                                <div class="u-pull-left" style="text-align: center; width: 50%; height: 100%">
                                    <img id="fig3" class="u-max-full-width" src="index_files/python-demo.png" />
                                    <p>Figure depicting a part of the Python demo
                                    </p>
                                </div>
                                <div class="one-half-column">
                                    <div class="u-pull-right" style="text-align: center; width: 50%; height: 100%">
                                        <img id="fig4" class="u-max-full-width" src="index_files/python-pixel.png" />
                                        <p>Display of the two color values.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>
                        For the experiments 10 random samples were taken around the position of the clicked
                        pixel within
                        a
                        20x20 box. For each of the randomly selected pixels a histogram was built and
                        compared against
                        the
                        color distribution of the initially clicked pixel.
                    </p>

                    <h6>C++ Implementation</h6>
                    <p>Once we were confident that the distance functions were going to feasible for using
                        within
                        PatchMatch,
                        the code from the python scripts was ported into the example code that was provided
                        by the
                        authors of the PatchMatch paper. A number of hurdles had to be overcome in order to
                        get a
                        running
                        solution. One major problem that persisted throughout the implemenation of the code,
                        was the
                        long
                        runtime. The initial working example code completed its runs within 10 seconds,
                        however, once
                        the
                        new distance functions replaced the old one, runtimes upwards of 45 minutes. This
                        was obviously
                        an
                        which had to be solved, but ultimately too much time was taken trying to optimize an
                        issue which
                        perhaps
                        could not be fixed easily. The fact that a lot of allocations and deallocations had
                        to be
                        performed
                        to build the histograms for our distance functions, meant that a lot of overhead was
                        incurred to
                        make our code run. Some optimizations were done to try and alleviate the slow
                        runtime issue, for
                        example
                        by preallocating our array of buckets, but none were effective in making a
                        significant dent in
                        the long runtimes.
                    </p>
        </div>

        <div class="docs-section" id="Results">
            <h3 class="section-heading">Results</h3>
            <p>In order for us to verify that PatchMatch works as intended with the new data set and
                functions
                we need
                to have a baseline to compare to. The original publication of the PatchMatch paper had an
                example
                implementation
                to display how the algorithm works, but for our purposes we decided to use our own images
                rendered first
                through Mitsuba in order to create our baseline. The images and results of that example are
                displayed below:
                <div class="container">
                    <div class="row">
                        <div class="one-half-column">
                            <div class="u-pull-left" style="text-align: center; width: 45%; height: 50%">
                                <img id="fig5" class="u-max-full-width" src="index_files/cbox.png" />
                                <p>Image displaying the first frame</p>
                            </div>
                        </div>
                        <div class="one-half-column">
                            <div class="u-pull-right" style="text-align: center; width: 45%; height: 50%">
                                <img id="fig6" class="u-max-full-width" src="index_files/cbox1.png" />
                                <p>Image displaying the following frame</p>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row">
                            <div class="one-half-column">
                                <div class="u-pull-left" style="text-align: center; width: 45%; height: 50%">
                                    <img id="fig5" class="u-max-full-width" src="index_files/nnf.jpg" />
                                    <p>Resulting PatchMatch NNF</p>
                                </div>
                            </div>
                            <div class="one-half-column">
                                <div class="u-pull-right" style="text-align: center; width: 45%; height: 50%">
                                    <img id="fig6" class="u-max-full-width" src="index_files/nnd.jpg" />
                                    <p>Resulting PatchMatch distance field</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </p>
            <p>
                The idea now is that if we are able to replicate a result similar to the ones displayed
                above,
                PatchMatch would be feasible for use in our application. We then went ahead and implemented
                the angular distance function into the code and ran our tests. Our tests consisted of two types
                of input data:
                <ol>
                    <li>A reconstructed image sampled at 1024 SPP</li>
                    <li>A data dump from the next frame which was sampled at 16 SPP</li>
                </ol>
                These two inputs were going to be used to evaluate if PatchMatch would find the same patches
                as during a regular run. Initially, before any changes
                were made to the actual code, PatchMatch completed its runs under 10 seconds. Once our new
                distance functions were integrated and we used our data, the run time increased to over 45 minutes.
                The output of these test runs can be seen below.
                <div class="container" style="padding-top: 0.5cm">
                    <div class="row">
                        <div class="one-half-column">
                            <div class="u-pull-left" style="text-align: center; width: 45%; height: 50%">
                                <img id="fig5" class="u-max-full-width" src="index_files/reconstructed_nnf.jpg" />
                                <p>PatchMatch NNF using angular distance</p>
                            </div>
                        </div>
                        <div class="one-half-column">
                            <div class="u-pull-right" style="text-align: center; width: 45%; height: 50%">
                                <img id="fig6" class="u-max-full-width" src="index_files/reconstructed_nnd.jpg" />
                                <p>PatchMatch NND using angular distance</p>
                            </div>
                        </div>
                    </div>
                </div>
                As we can see, the results show that the angular distance function does not get close to
                estimating a better distance measure for our images. An observation can be made that the
                output is fairly uniform, in that found patches seem to be arranged in a vertical manner.
                The initial suspicion should point to a bug in the program, but after thorough debugging
                was done it turns out that this is the expected result using the angular distance function.
                Even when using different seeds for the random propagation and checking that the code runs
                as expected, we arrive at the striped output shown above.
            </p>
            <p>
                Another concern regarding this methodology is the overhead in time and memory consumption
                when running this algorithm. The time that is taken to read the data in and transform it
                to make it useful for the algorithm was exceeding limits that were far from ideal. The data
                from one dump at 16 SPP was around 550 MB at 500x500 pixels, and scaled linearly with the
                amount of samples per pixel. If this algorithm were to be used in a real-world renderer
                we would see those rendering times go up high enough to not be useful at all.
            </p>
        </div>

        <div class="docs-section" id="conclusion">
            <h3 class="section-heading">Conclusion</h3>

            <p>This project has shown that although it is feasible, the application of the PatchMatch
                algorithm
                to PBR techniques might not be the best idea. The given distance functions do work
                as
                intended,
                yet when they are combined with the PatchMatch algorithm they do not seem to provide the
                speedup
                that is
                required to make it a worthwhile replacement for current techniques that deal with denoising
                rendered images
                (machine learning, etc.). One aspect that has not been touched on earlier in this document
                is
                the fact
                that PBR algorithms try to be as unbiased as possible. In our case that means that all
                calculations
                pertaining to the
                evaluation of light contributions should not be influenced by prior knowledge of what the
                scene
                might look
                like. With this fact in mind, even if PatchMatch worked perfectly in correspondence with
                rendering images,
                it is unlikely that this bias will be removable from the algorithm and therefore less useful
                in
                real-world
                applications. Although it might sound like there is not much merit to the usage of PatchMatch
                in a rendering scenario, further improvements might still make it a viable solution for
                solving problems that are bounded by sampling issues.
            </p>
        </div>

        <div class="docs-section" id="futurework">
            <h3 class="section-heading">Future Work</h3>

            <p>In the future, there are several things that can be done to expand on this project:</p>

            <ol>
                <li>Different PBR algorithms could be used to see if they would benefit from having
                    PatchMatch
                    applied to their runtime.
                </li>
                <li>Testing of different thresholds should be done for each distance function to see how
                    they affect the selection process for an ideal pixel.
                </li>
                <li>Integrating the algorithm into an actual renderer (e.g. Mitsuba). The prototype runs on
                    a
                    barebones environment with precomputed sample dumps.
                </li>
            </ol>
        </div>

        <div class="docs-section" id="references">
            <h3 class="section-heading">References</h3>
            <ul class="popover-list">
                <li class="popover-item" id="1">
                    [1] Barnes C., Shechtman E., Finkelstein A. and Goldman D.
                    (2009). PatchMatch: A Randomized Correspondence Algorithm for
                    Structural Image Editing. ACM Transactions on Graphics (Proc. SIGGRAPH), 28(3).
                </li>
                <li class="popover-item" id="2">
                    [2] <a
                        href="https://chunky.llbit.se/path_tracing.html">https://chunky.llbit.se/path_tracing.html</a>
                </li>
                <li class="popover-item" id="3">
                    [3] <a href="https://www.mitsuba-renderer.org/">https://www.mitsuba-renderer.org/</a>
                </li>
                <li class="popover-item" id="4">
                    [4] <a href="http://www.pbr-book.org/">http://www.pbr-book.org/</a>
                </li>
            </ul>
        </div>
    </div>
</body>

</html>